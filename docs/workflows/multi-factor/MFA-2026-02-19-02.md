# MFA-2026-02-19-02

## round_meta
- round_id: MFA-2026-02-19-02
- round_type: mfa
- date: 2026-02-19
- owner: codex
- market: csi1000

## retrieve
- pool_source_query: `sqlite3 -header -column data/factor_library.db "select f.name,f.category,f.status,t.rank_icir,t.fdr_p,t.significant from factors f join factor_test_results t on f.name=t.factor_name where t.market='csi1000' and t.significant=1 order by abs(t.rank_icir) desc limit 40;"`
- stable_pool_query: `sqlite3 -header -column data/factor_library.db "select factor_name,rank_icir,fdr_p,significant,test_start,test_end,tested_at from factor_test_results where market='csi1000' and significant=1 order by abs(rank_icir) desc limit 40;"`
- memory_refs:
  - AGENTS.md#推荐方向
  - AGENTS.md#禁止方向

## generate
- hypothesis: 在显著且稳定的 Top30 因子池中，非线性模型在低换手（hold=40）下可实现更高净超额；线性加权作为稳健基线。
- market_logic: 复合类因子（composite_mul/add/ratio）具备跨维度交互信息，树模型可捕获非线性边际；较长持有期可削减交易摩擦。
- expected_direction: IR_with_cost 提升、excess_return_with_cost 为正、max_drawdown 收敛。
- model_families:
  - linear: linear_weighted（按 rank_icir 方向与绝对值加权）
  - nonlinear: LightGBM / XGBoost / LGB+XGB rank-ensemble
- factor_pool_notes: latest significant(=1) per factor + status in Accepted/Baseline + 去重 VSUMP/VSUMN，按 |rank_icir| 取 Top30。

## evaluate
- script: `scripts/mfa_combo_study.py`（临时脚本）
- start: 2024-01-01
- end: 2024-12-31
- run_id: N/A（Python API直跑）
- output_paths:
  - outputs/mfa_combo_study_2026-02-19-02.json
  - outputs/mfa_combo_study_2026-02-19-02.log
- executed: yes
- not_run_reason: N/A
- excess_return_with_cost: 0.153823
- ir_with_cost: 1.2281
- max_drawdown: -0.097507
- stress_test_notes: Top3 策略在高成本（open=10bps, close=30bps）下仍为正；最优 `xgb+hold=40` 的 IR 从 1.2281 降至 1.1722，年化超额从 15.38% 降至 14.68%，结论稳定。
- mfa_result: pass（本轮内部最优）

### 关键结果（base_cost）

| model | hold | IR_with_cost | excess_return_with_cost | max_drawdown | daily_turnover |
|---|---:|---:|---:|---:|---:|
| xgb | 40 | 1.2281 | 0.153823 | -0.097507 | 0.032008 |
| linear_weighted | 20 | 0.6857 | 0.108007 | -0.156499 | 0.065391 |
| linear_weighted | 10 | 0.6683 | 0.099771 | -0.147491 | 0.106327 |
| lgb_xgb_ensemble | 40 | 0.3754 | 0.035742 | -0.088703 | 0.035619 |
| lgb | 40 | 0.1818 | 0.018720 | -0.104253 | 0.036450 |

## distill_decision
- decision: Iterate
- decision_basis: 本轮最优 `xgb+hold=40`（IR=1.2281，年化超额=15.38%，MaxDD=-9.75%）优于同轮其他方案且在高成本下稳健，但仍低于历史已推广基线 `LGB+1d+hold=20`（MFA-2026-02-19-01，IR=1.564，年化超额=17.23%）。
- failure_mode: 候选池切换到“最新显著Top30”后，LGB 与集成表现显著退化；增益集中在单一 XGB+长持有配置，尚不足以替代现有 Promote 配置。
- next_action: 下一轮固定 `hold=40`，仅在 `xgb` 路线做候选池分层（Baseline-only / Accepted-only / 混合）与标签窗口（1d/2d）联合扫描，目标超越 IR=1.564。

## distill_evidence
- db_query: `sqlite3 -header -column data/factor_library.db "select f.name,f.category,f.status,t.rank_icir,t.fdr_p,t.significant from factors f join factor_test_results t on f.name=t.factor_name where t.market='csi1000' and t.significant=1 order by abs(t.rank_icir) desc limit 40;"`
- run_id: N/A
- outputs:
  - outputs/mfa_combo_study_2026-02-19-02.json
  - outputs/mfa_combo_study_2026-02-19-02.log
- doc: docs/workflows/multi-factor/MFA-2026-02-19-02.md
