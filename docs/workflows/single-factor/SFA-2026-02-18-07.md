# SFA-2026-02-18-07

## round_meta
- round_id: SFA-2026-02-18-07
- round_type: sfa
- date: 2026-02-18
- owner: agent
- market: csi1000

## hypothesis
- hypothesis: 对现有338因子库的空白领域进行系统性brainstorm，8个新方向（订单流OFI、价格冲击衰减PIDE、换手制度速度、隔夜非对称、日内结构、估值加速度、波动制度、量价健康度）均存在有效预测信号，其中PIDE和PV_HEALTH方向|ICIR|可超过0.30。
- market_logic: CSI1000中均值回归特征强烈，散户行为导致高冲击后反转（PIDE）、反弹缩量（PV_HEALTH），日夜收益分离反映机构/散户行为差异（OVN_ASYM），短期波动率制度偏离反映系统性风险积累（VOL_REGIME）。
- expected_direction: 绝对值增强（部分方向为负向，均值回归信号）

## factor_expression_list

### A. OFI - 订单流不平衡
- OFI_AMT_20 = `Mean(If(Gt($close, Ref($close, 1)), $amount, 0 - $amount), 20) / (Mean($amount, 20) + 1e-8)`
- OFI_AMT_5 = `Mean(If(Gt($close, Ref($close, 1)), $amount, 0 - $amount), 5) / (Mean($amount, 5) + 1e-8)`
- OFI_VOL_20 = `Mean(If(Gt($close, Ref($close, 1)), $volume, 0 - $volume), 20) / (Mean($volume, 20) + 1e-8)`
- OFI_CUMUL_5 = `Sum(If(Gt($close, Ref($close, 1)), $amount, 0 - $amount), 5) / (Sum($amount, 5) + 1e-8)`
- OFI_BULLS_BEARS_10 = `Div(Sum(If(Gt($close, Ref($close, 1)), $amount, 0), 10) - Sum(If(Lt($close, Ref($close, 1)), $amount, 0), 10), Sum($amount, 10) + 1e-8)`
- OFI_SURGE_5_20 = (OFI近5日/近20日买入强度比)

### B. PIDE - 价格冲击衰减
- PIDE_HIGHVOL_REVERSAL_10 = `Mean(If(Gt($amount, Mean($amount, 20)), 0 - (Div($close, Ref($close, 1)) - 1), 0), 10)`
- PIDE_RET_LAGAMT_CORR_10 = `Corr(Div($close, Ref($close, 1)) - 1, Ref(Div($amount, Ref($amount, 1)) - 1, 1), 10)`
- PIDE_BIGAMT_NEXTRET_20 = (大成交额日后次日收益)
- PIDE_BIGAMT_FREQ_10 = (大成交频率倒数)

### C. TURN_SPD - 换手制度速度
- TURN_Q120_SPEED_10 = (120日换手分位数10日变动速度)
- TURN_RSI_PROXY_10 = `Div(Mean(If(Gt($turnover_rate, Ref($turnover_rate, 1)), $turnover_rate, 0), 10), Mean($turnover_rate, 10) + 1e-8)`
- TURN_ACCEL_5_20 = (5/20换手加速度)
- TURN_UPDAYS_10 = (换手率上升天数比例)
- TURN_VOL_REGIME_5_60 = `Div(Std($turnover_rate, 5), Std($turnover_rate, 60) + 1e-8)`

### D. OVN_ASYM - 隔夜非对称
- OVN_INTRA_DIFF_10 = `Mean(Div($open, Ref($close, 1)) - 1, 10) - Mean(Div($close, $open) - 1, 10)`
- OVN_ACCUM_5 = `Sum(If(Gt(Div($open, Ref($close, 1)), 1), 1, 0), 5) - Sum(If(Lt(Div($open, Ref($close, 1)), 1), 1, 0), 5)`
- OVN_STR_NORM_10 = (波动率标准化隔夜强度)
- OVN_FADE_RATE_20 = (大幅高开后日内衰减频率)
- OVN_INTRA_AGREE_20 = (隔夜与日内方向一致性)

### E. INTRA_STR - 日内结构
- INTRA_LOWER_SHADOW_10 = `Mean(Div(Less($open, $close) - $low, $high - $low + 1e-8), 10)`
- INTRA_UPPER_SHADOW_10 = (上影线均值)
- INTRA_VWAP_TREND_5_20 = (VWAP偏离趋势)
- INTRA_SHRINK_NEWLOW_10 = (缩量新低频率)
- INTRA_CLOSE_HIGH_VOL_10 = (尾盘强势信号)

### F. VAL_ACCEL - 估值加速度
- VAL_PE_ACCEL_NORM_5 = `Div(Div($pe_ttm, Ref($pe_ttm, 5)) - 1, Std(Div($pe_ttm, Ref($pe_ttm, 1)) - 1, 20) + 1e-8)`
- VAL_PE_DEV_ACCEL_5 = (PE偏离加速)
- VAL_PB_DEV_ACCEL_5 = (PB偏离加速)
- VAL_PE_PRICE_DECOUPL_10 = (估值价格解耦)
- VAL_PB_PE_REL_SPEED_10 = (PB/PE相对速度)

### G. VOL_REGIME - 波动制度
- VOL_SKEW_5_60 = `Div(Std(Div($close, Ref($close, 1)) - 1, 5), Std(Div($close, Ref($close, 1)) - 1, 60) + 1e-8) - 1`
- VOL_SKEW_10_60 = (10/60波动偏离)
- VOL_CHANGE_5_20 = (Vol-of-vol)
- VOL_RANGE_REGIME_10 = (高低价范围波动制度)
- VOL_VVOL_SKEW_5_60 = (成交量波动制度)

### H. PV_HEALTH - 量价健康度
- PV_REBOUND_VOL_10 = `Mean(If(Gt(Div($close, Ref($close, 1)) - 1, 0.005), Div($volume, Mean($volume, 10) + 1e-8), 0), 10)`
- PV_HEALTH_20 = `Corr(If(Gt($close, Ref($close, 1)), 1, 0 - 1), Div($volume, Mean($volume, 20) + 1e-8) - 1, 20)`
- PV_UP_DOWN_VOL_RATIO_10 = (涨跌日成交量比)
- PV_BEARAMT_RATIO_20 = (下跌日成交额占比)
- PV_DIVERGE_HIGH_10 = (高位缩量背离)

## preflight_gate
- parse_ok: pass (40/40 个因子成功计算)
- complexity_level: medium
- redundancy_flag: low（与已有因子类别差异较大，主要填补OFI/PIDE/VOL_REGIME空白）
- data_availability: pass（仅使用 Phase 1 字段）
- gate_notes: PV_DIVERGE_HIGH_10 因复合逻辑复杂，IC极低（0.0006），需重构表达式

## experiment_config
- script: `.agents/skills/qlib-single-factor-mining/scripts/test_brainstorm_8dir_batch.py`
- start: 2020-01-01
- end: 2024-12-31
- run_id: N/A (batch script, no MLflow)
- output_paths:
  - outputs/brainstorm_8dir_results.csv

## single_factor_metrics

### 汇总（Top-10 by |ICIR|）

| 排名 | 因子 | 方向 | RankIC | ICIR | t-stat | p-value | 状态 |
|---|---|---|---|---|---|---|---|
| 1 | PIDE_HIGHVOL_REVERSAL_10 | B.冲击衰减 | +0.0265 | +0.3224 | +11.2 | <0.0001 | Accepted |
| 2 | PV_REBOUND_VOL_10 | H.量价健康 | -0.0259 | -0.3064 | -10.7 | <0.0001 | Accepted |
| 3 | TURN_VOL_REGIME_5_60 | C.换手制度 | -0.0177 | -0.2725 | -9.5 | <0.0001 | Accepted |
| 4 | OVN_INTRA_DIFF_10 | D.隔夜非对称 | +0.0230 | +0.2679 | +9.3 | <0.0001 | Accepted |
| 5 | PV_HEALTH_20 | H.量价健康 | -0.0146 | -0.2603 | -9.1 | <0.0001 | Accepted |
| 6 | VOL_SKEW_5_60 | G.波动制度 | -0.0170 | -0.2386 | -8.3 | <0.0001 | Accepted |
| 7 | VOL_RANGE_REGIME_10 | G.波动制度 | -0.0135 | -0.2313 | -8.1 | <0.0001 | Accepted |
| 8 | VOL_SKEW_10_60 | G.波动制度 | -0.0164 | -0.2286 | -8.0 | <0.0001 | Accepted |
| 9 | OFI_AMT_20 | A.OFI | -0.0188 | -0.2177 | -7.6 | <0.0001 | Accepted |
| 10 | OFI_VOL_20 | A.OFI | -0.0186 | -0.2133 | -7.4 | <0.0001 | Accepted |

### 方向统计

| 方向 | 总数 | 显著通过(p<0.01) | 最佳ICIR |
|---|---|---|---|
| A.OFI订单流 | 6 | 6 | -0.2177 (OFI_AMT_20) |
| B.冲击衰减 | 4 | 3 | +0.3224 (PIDE_HIGHVOL_REVERSAL_10) ⭐ |
| C.换手制度 | 5 | 5 | -0.2725 (TURN_VOL_REGIME_5_60) |
| D.隔夜非对称 | 5 | 4 | +0.2679 (OVN_INTRA_DIFF_10) |
| E.日内结构 | 5 | 4 | +0.2012 (INTRA_LOWER_SHADOW_10) |
| F.估值加速 | 5 | 3 | -0.1805 (VAL_PE_ACCEL_NORM_5) |
| G.波动制度 | 5 | 4 | -0.2386 (VOL_SKEW_5_60) |
| H.量价健康 | 5 | 4 | -0.3064 (PV_REBOUND_VOL_10) ⭐ |

- rank_ic_mean (best): +0.0265 (PIDE_HIGHVOL_REVERSAL_10)
- rank_icir (best): +0.3224 (PIDE_HIGHVOL_REVERSAL_10)
- n_days: 1699
- sfa_result: pass（33/40 通过 p<0.01，8个方向全部有至少1个因子显著）

## decision
- decision: Promote
- decision_basis:
  - 40因子中 33 个 p<0.01，通过率 82.5%
  - 8个方向全部有效：PIDE_HIGHVOL_REVERSAL_10 ICIR=0.32, PV_REBOUND_VOL_10 ICIR=-0.31
  - 新方向（OFI/PIDE/VOL_REGIME/PV_HEALTH）均未在原有338因子库中有直接覆盖
  - 满足硬门槛：fdr_p < 0.01（t统计量全部 > 5.0），|ICIR| >= 0.10
- failure_mode: N/A
- next_action:
  1. 优先将 PIDE、PV_HEALTH、OFI、VOL_REGIME 方向的最强因子（各方向取1-2个）加入多因子MFA实验
  2. 对 PV_DIVERGE_HIGH_10（ICIR=0.011）重新设计表达式，改为纯收盘高位+成交量萎缩逻辑
  3. 检验 PIDE_HIGHVOL_REVERSAL_10 与已有 ORTH_REVERT_LOWVOL_20 的相关性（预估中等相关）

## evidence_links
- db_query: `uv run python .agents/skills/qlib-single-factor-mining/scripts/factor_db_cli.py list --category ofi,price_impact,turn_speed,ovn_asym,intra_struct,val_accel,vol_regime,pv_health`
- run_id: N/A
- outputs:
  - outputs/brainstorm_8dir_results.csv
